var WaterfallDenseGridAccessibility;(function(){function tt(){if(r){var n=r.gfbc("dgControl",_d);n&&(y=r.ga(n,"data-afcsot")==="1",f=r.gebc(g,n),f.length>0&&(e(),sj_evt.bind("DenseGridResultsUpdated",e),sj_be(_w,"resize",e),sj_be(n,"keydown",p),sj_be(_w,"unload",a),sj_evt.bind("ajax.unload",a)))}}function e(){var i,n,t,e;if(f.length>0)for(u=[],s=[],h=[],c=[],i=0;i<f.length;i++){var o=f[i],l=[],a=[],v=[],r=[];for(n=0;n<o.childNodes.length;n++)t=o.childNodes[n],l[n]=t.offsetTop,a[n]=t.clientHeight,v[n]=d(t),e=t.querySelector(".iusc,.ent a"),e?r.push(e):r.push(t);s.push(l);h.push(a);c.push(v);u.push(r)}}function p(f){var s=it(f),c=function(){return!!_w.IsSearchAppXYFocusEnabled},a,p,h,g,e,nt;if(s==39){if(n+1<u.length)a=w(n+1,n,i),l(n+1,a);else if(c())return;o(f)}else if(s==37){if(n-1>=0)a=w(n-1,n,i),l(n-1,a);else if(c())return;o(f)}else if(s==38){if(i-1>=0)l(n,i-1);else if(c())return;o(f)}else if(s==40){if(i+1<u[n].length)l(n,i+1);else if(c())return;o(f)}else s==9&&(p=document.activeElement,h=!1,t&&(g=r.gaebc(v,t),g&&(e=b("a",g),e=e.filter(function(n){return n.tabIndex!="-1"}),nt=d(g.parentElement),y?h=!0:f.shiftKey&&(e.length==0||p==e[0])?(k(nt-1,!0),h=!0):f.shiftKey||e.length!=0&&p!=e[e.length-1]||(k(nt+1),h=!0))),h||(t=p))}function w(n,t,i){var r=h[t][i]/2+s[t][i],u=s[n],f=h[n];if(u[i]<=r&&u[i]+f[i]>=r)return i;if(u[i]>r)while(i>0&&u[i]>r)i--;else while(i<f.length-1&&u[i]+f[i]<r)i++;return i}function l(r,f){if((r!=n||f!=i)&&(t&&(t.tabIndex=-1),r<u.length)){n=r;var e=u[r];f<e.length&&(i=f,t=e[f],t.tabIndex=0,t.focus())}}function o(n){return sj_sp(n),sj_pd(n),!1}function it(n){return n?n.which?n.which:n.keyCode:-1}function a(){sj_evt.unbind("DenseGridResultsUpdated",e);sj_ue(_w,"resize",e);sj_ue(nt,"keydown",p);sj_ue(_w,"unload",a);sj_evt.unbind("ajax.unload",a)}function b(n,t){var f=[],u,i,r;if(t)for(u=t.getElementsByTagName(n),i=0;i<u.length;i++)r=u[i],(r.offsetHeight>0||r.offsetWidth>0)&&f.push(r);return f}function k(n,i){var f,e,u;i===void 0&&(i=!1);f=rt(n);f&&(i&&(e=r.gaebc(v,f),u=b("a",e||f),u=u.filter(function(n){return n.tabIndex!="-1"}),u&&u.length>0&&(f=u[u.length-1])),t=f,t.focus(),o(event))}function d(n){var i=r.gpc(n,"LI"),t=parseInt(r.ga(i,"data-idx"));return t?t:-1}function rt(n){var t,r,i,f;if(n<=0)return null;for(t=0;t<c.length;t++)for(r=c[t],i=0;i<r.length;i++)if(f=r[i],f>n)continue;else if(f===n)return u[t][i];return null}var n=0,i=0,t,v="iuscp",g="dgControl_list",u,f,nt,s,h,c,y=!1,r=typeof pMMUtils!="undefined"?pMMUtils:null;tt()})(WaterfallDenseGridAccessibility||(WaterfallDenseGridAccessibility={}))