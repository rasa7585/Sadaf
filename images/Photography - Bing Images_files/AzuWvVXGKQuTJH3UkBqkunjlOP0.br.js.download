var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))};define("clientinst_xls",["require","exports"],function(n,t){function iu(){function n(n,t){n in i||(i[n]=t)}i=_w[bi]=_w[bi]||{};n(d,2e3);n(tr,1e3);n(ir,5e5);n(rr,1e5);n(ur,500);n(o,!0);n(fr,3);n(nu,5e3)}function or(){ni=0;pi=_G.ST?_G.ST.getTime():0;ri=!1;si={}}function p(n,t,r,u){var s,f,h;i[o]&&(s=(new Date).getTime(),f={errorType:n,failCount:t,ImpressionGuid:r,TS:s,SEQ:ni++},f[e]=v+"LER",ct(f),u?(wi++,wi>i[fr]&&(f.errorType="Overload",i[o]=!1),h={impressionGuid:r,timestamp:s,data:{eventType:dt,eventData:f}},ci([h])):tt(dt,f,null))}function ru(){iu();or();try{b=_w.localStorage;u.initialize()}catch(n){}}function w(n){u.append(n);a()}function hi(n){return JSON.stringify(n).replace(/]]>/g,"]]]\]><![CDATA[>")}function r(n,t,i){n.push("<",t,">",i,"<\/",t,">")}function uu(n,t,i){var s,e=n.data,o=e.eventData,h,u,f;o||(o=e.eventData={});t.push("<E>");r(t,"T","Event."+e.eventType);r(t,"IG",o.OvrIG||n[ft]);n[fi]&&(r(t,"PrevIG",n[fi]),n[ei]&&r(t,"DominantIG",n[ei]));h=e.dataSources;h&&r(t,"DS","<![CDATA["+hi(h)+"]\]>");u=e.pageLayout;u&&(t.push("<Page>"),f=!1,"Name"in u&&(r(t,"Name",u.Name),f=!0),"Number"in u&&(r(t,"Num",u.Number),f=!0),"IID"in u&&(r(t,"IID",u.IID),f=!0),"SFX"in u&&(r(t,"SFX",u.SFX),f=!0),f&&(u=(s=u.L)!==null&&s!==void 0?s:[]),r(t,"L","<![CDATA["+hi(u)+"]\]>"),t.push("<\/Page>"));o.UTS=i;r(t,"D","<![CDATA["+hi(o)+"]\]>");r(t,"TS",n[gi]);t.push("<\/E>")}function ct(n){var t=_w.location.href,i;return ut&&t.indexOf(ut)===0||(i=t.indexOf("?"),i<0&&(i=t.indexOf("#")),ut=i<0?t:t.substring(0,i)),n.CurUrl=ut,n}function sr(n){var i={isCompressed:!1,stringValue:""},t=["<ClientInstRequest>"],a=(new Date).getTime(),v=_G.CID||sj_cook.get(vi,vi),s,u,y,f,h,c,e,p,o;if(v&&r(t,"CID",v),n.length>0){for(s=n[0].data,s.eventType==gt&&(u=s.pageLayout,u&&u.IID&&u.SFX&&(y=u.IID+"_"+u.SFX,r(t,"AppNS",y))),f=0,h=gr;f<h.length;f++)c=h[f],_w[l]&&_w[l][c]&&_w[l][c](n,t,a,i);if(n.length>0){for(t.push("<Events>"),e=0;e<n.length;e++)p=n[e],uu(p,t,a);t.push("<\/Events>")}}if(t.push("<\/ClientInstRequest>"),o=t.join(""),_G.EnableCompression&&_w.fflate){var b=_w.fflate.strToU8(o),k=_w.fflate.deflateSync(b),w=btoa(String.fromCharCode.apply(String,k));if(w.length<o.length)return i.stringValue=w,i.isCompressed=!0,i}return i.stringValue=o,i}function hr(n){return _w[y]&&_w[y][ki]?_w[y][ki](n):n.isCompressed?lt(_G.XLSC):lt(_G.XLS)}function lt(n,t){var i=[],r,u,f,e;if(i.push("dl=1"),_G.XLSOvr&&i.push("f="+encodeURIComponent(_G.XLSOvr)),t)for(r=0,u=t;r<u.length;r++)f=u[r],i.push(f+"=1");return e=n.indexOf("?")!==-1?"&":"?",n+e+i.join("&")}function a(n){if(n===void 0&&(n=!1),i[o]){var t=n?h[k]:h[et];t[ot]||(t[ot]=setTimeout(function(){return nt(n,!1)},t.getInterval()))}}function nt(n,t,r){var e,b,l,v,y,c,w,s;if(i[o]&&(e=n?h[k]:h[et],clearTimeout(e[ot]),e[ot]=null,!n||!h[et][f])){if(!n&&h[k][f]&&h[k][f].abort(),e[f])if(b=(new Date).getTime()-e[nr],b>i[d])e[f].abort(),e[f]=null,p("TimedOut",1,_G.IG);else return;if(l=wr(r),v=u.getBatch(n),v.length!=0){if(y=v.map(function(n){return n.log}),l&&at(y,"SB"),c=sr(y),w=hr(c),l&&eu(w,c.stringValue)){e[f]&&t&&(e[f].abort(),e[f]=null);u.clearSentItems(n,!0)&&!n&&a(!1);a(!0);return}s=sj_gx();s.open("POST",w,!0);i[d]>=1e3&&(s.timeout=i[d]);s.onload=function(){return fu(s,e,n)};s.setRequestHeader("Content-type","text/xml");e[f]=s;e[nr]=(new Date).getTime();s.send(c.stringValue)}}}function at(n,t,i){n.forEach(function(n){var r,u;(r=(u=n.data.eventData)[kt])!==null&&r!==void 0?r:u[kt]={};n.data.eventData[kt][t]=i!==null&&i!==void 0?i:"1"})}function fu(n,t,i){if(n.readyState===4){t[f]=null;var r=Math.floor(n.status/100);r===2?(u.clearSentItems(i)&&!i&&a(!1),a(!0)):r===4?(u.markFailedItems(!0,i),a(!0)):u.markFailedItems(!1,i);i&&u.recordRetryAttempt()}}function vt(n,t,i,r,u,f,e,o,s){for(var d,h,a,v,l,y,g,c,p,w,b,k=0,nt=dr;k<nt.length;k++)d=nt[k],_w[ti]&&_w[ti][d]&&_w[ti][d](t);if(h={},ct(h),t)if(typeof t=="string")h.Text=t;else for(a in t)t.hasOwnProperty(a)&&(h[a]=t[a]);if(i&&(er.indexOf(i)>=0?h.T=i:(i.substring(0,3)==="CI."&&(i=i.substring(3)),h.T="CI."+i)),v=s||(new Date).getTime(),h.TS=v,h.RTS=v-pi,h.SEQ=ni++,l=(c={},c[ft]=f||h.ImpressionGuid||_G.IG,c[fi]=e,c[gi]=v,c.data={eventType:n||rt,eventData:h,dataSources:r,pageLayout:u},c[ei]=o,c),_G.XLSThrottle&&tu.indexOf(h.T)===-1){if(y=[l[ft],n!==null&&n!==void 0?n:rt,(p=h.T)!==null&&p!==void 0?p:"",(w=h.FID)!==null&&w!==void 0?w:"",(b=h.Name)!==null&&b!==void 0?b:""].join(","),oi.hasOwnProperty(y)||(oi[y]=0),g=++oi[y],g>_G.XLSThrottle)return null;g===_G.XLSThrottle&&at([l],"TT")}return h.T==="CI.Click"||n===gt?(ci([l]),null):l}function ci(n){var i=sr(n),r=hr(i),u=i.stringValue,t;navigator&&navigator.sendBeacon?navigator.sendBeacon(r,u):(t=sj_gx(),t.open("POST",r),t.setRequestHeader("Content-type","text/xml"),t.send(u))}function cr(n,t){var r=[];for(var i in n)n.hasOwnProperty(i)&&(typeof n[i]=="string"&&(n[i]=decodeURIComponent(n[i])),r.push(i,n[i]));c(n.T,n.FID,n.Name,t,r,"DL")}function li(n,t){(new Image).src=_G.lsUrl+"&dl=2&Type=Event.ClientInst&DATA="+n;c("Info","XLS","DLFallback",!1,["DATA",n,"SRC",t],"DLF")}function ai(n,t,i){var r,u,f,e;if(_G.DirectLogFlight!=null&&t<=_G.DirectLogFlight)try{r=null;try{r=JSON.parse(n)}catch(o){r=JSON.parse(decodeURIComponent(n).replace(/[\u0000-\u001F]+/g,""))}if(Array.isArray(r))for(u=0,f=r;u<f.length;u++)e=f[u],cr(e,i);else r!==null&&typeof r=="object"?cr(r,i):li(n,"Else JSON Parse")}catch(o){li(n,"DLErr -"+o.message)}else li(n,"Else Flight Group")}function lr(n){var i,t;if(_G.DLPState!=null)try{if(n=n.replace(/(\w+):(?=(?:[^"]*"[^"]*")*[^"]*$)/g,'"$1":'),n=JSON.parse(n),n[e]=(i=n[e])!==null&&i!==void 0?i:v+"LPerf",t=vt("ClientInst",n,"CI.Perf"),!t)return;_G.DLPState==0?ci([t]):_G.DLPState==1&&w(t)}catch(r){c("Info","XLS","LPFallback",!1,["DATA",n,"SRC","LPErr - "+r.message],"LPF")}}function tt(n,t,r,u,f,s,h,c,l){var a,y;i[o]&&(t!==null&&t!==void 0?t:t={},t[e]=(a=t[e])!==null&&a!==void 0?a:v+"LE",y=vt(n,t,r,u,f,s,h,c,l),y)&&w(y)}function ar(n){var t,i=[];n.forEach(function(n){si.hasOwnProperty(n)||(si[n]=1,i.push(n))});i.length>0&&tt(yi,(t={queryTags:i.join(",")},t[e]="F",t),yi)}function vr(n,t,r,u,f,s){var h,l,c;if(i[o]){if(!n||!t||!r||!u)return console.error("LogCustomData: Missing one or more required identifier fields in data object");(l=__assign((h={T:n,FID:t,Name:r,Namespace:u,CustomDataKeys:Object.keys(f).join(",")},h[e]=v+"CD",h),f),c=vt(rt,l,n,null,null,s),c)&&w(c)}}function eu(n,t){var i="sendBeacon",r=!1;if(navigator&&navigator[i])try{r=navigator[i](n,t)}catch(u){p("SBFail",1,_G.IG)}return r}function wr(n){return _w[y]&&_w[y][di]?_w[y][di](n):n&&n.useSendBeacon}function br(n,t){n===void 0&&(n=!0);wr(t)&&(u.dumpToStorage(),nt(!1,!0,t))}function yt(){u.dumpToStorage();nt(!1,!1)}function pt(){u.dumpToStorage();ii=!0;nt(!1,!0,{useSendBeacon:!0})}function kr(n,t,i){n!==null&&n!==void 0?n:n={};n[e]=v+"LP";tt(gt,n,"ClientSidePartialImpression",t,i)}var it,wt,bt,er,u,h,yr,pr,c;t.__esModule=!0;t.LogPartialImpression=t.FlushMainQueueDontForce=t.ForceFlush=t.Log2=t.Log=t.LogCustomData=t.LogFilterFlare=t.LogEvent=t.LogPerf=t.DirectLog=t.modifyRoute=t.collectCommonEventProperties=t.enqueue=void 0;var v="XLS-",e="SDK",kt="XLSF",vi="MUID",dt="CIQueueError",gt="PartialDynamicContent.FrontDoor",rt="ClientInst",yi="FilterFlare",i,ni,pi,b,ut,wi=0,bi="ClientInstConfig",ti="XLS_PreProcessor",dr=["ChatPrivacy","WSB"],l="XLS_PostProcessor",gr=["WSB"],y="XLS_Plugin_Function_Overrides",ki="determineRoute",di="useSendBeacon",ii=!1,ri=!1,s="inProgress",ui="retried",ft="impressionGuid",fi="previousImpressionGuid",ei="dominantImpressionGuid",gi="timestamp",f="currentRequest",nr="requestSentTimestamp",et="mainQueue",k="retryQueue",ot="flushTimeoutHandle",d="flushInterval",tr="retryInterval",ir="maxStorageUse",rr="maxBatchSize",ur="queueDumpInterval",o="isInstrumentationEnabled",fr="maxDirectErrors",nu="pageInfoTimeout",oi={},tu=["CI.Click","CI.BoxModel","CI.FilterFlare"],si={},g="sj_evt",st="sj_be",ht;(function(n){n[n.EVENT=0]="EVENT";n[n.MASTER_PAGE_IMPRESSION=1]="MASTER_PAGE_IMPRESSION"})(ht||(ht={}));er=["IsCI","VDPChapterTimestampClick"],function(n){function k(n){var t=["proactive","search","zinc"].some(function(t){return n.indexOf(t)==1});return"eventLogQueue"+(t?"_Online":"_Offline")}function y(){return f&&i[o]}function u(){var n,t;if(y()){n=ut();try{t=h;b[t]=n}catch(i){if(i.name.toLowerCase().indexOf("quota")>=0)f=!1;else throw i;}}}function v(){y()&&(e&&clearTimeout(e),e=setTimeout(u,i[ur]))}function d(){var i,e,r,u,n;if(b){if(i=b[h],t=[],typeof i=="string"||i&&i.length!==0)try{if(t=JSON.parse(i),t.some(function(n){return!n.log}))p("LSItemErr",t.length,_G.IG),t=[];else if(e=t.length,e>0){for(r=0,u=t;r<u.length;r++)n=u[r],at([n.log],"RE",n[s]?"IP":"NS"),n[s]=!1,n.log.type!==ht.MASTER_PAGE_IMPRESSION||_w[l]&&_w[l].WSB||c("Info","XLS","FailedMaster",!1,["DATA",JSON.stringify(n.log)]);_G.WSBSplit?nt(!1,!0,{useSendBeacon:!0}):a()}}catch(o){p("LSErr",0,_G.IG)}b[h]="[]";f=!0}}function g(n){var h=[],e=n?r[0]:t,o,c,f,u;if(e)for(o=0,c=e.length,f=0;f<c;f++)if((u=e[f],n||!u[ui])&&(!_G.XLSNoFlush||!u.log||u.log.type!==ht.MASTER_PAGE_IMPRESSION||_w[l]&&_w[l].WSB))if(o+=u.size,o<=i[rr])u[s]=!0,h.push(u);else break;return h}function tt(n,i){return i===void 0&&(i=!1),t=t.filter(function(t){return!t[s]&&(!n||t[ui])}),i?u():v(),t.length>0}function it(n,i){for(var f=[],h=i?r[0]:t,e=0,u,o,c;e<h.length;)if(u=h[e],u[s])if(at([u.log],"retry",n?"BR":"RE"),n){if(h.splice(e,1),u.log.data&&u.log.data.eventType===dt)continue;u[ui]=!0;f.push(u)}else u[s]=!1,e++;else e++;o=f.length;o==1?p("LogDrop",1,f[0].log[ft]):o>0&&(c=o/2,r.push(f.slice(0,c)),r.push(f.slice(c)));v()}function rt(){var n,t,i;if(r.length>0){for(n=r[0],t=0;t<n.length;)i=n[t],i[s]?n.splice(t,1):t++;n.length==0&&r.shift()}}function ut(){var e=JSON.stringify(t),u=e.length-i[ir],o=t.length,r,n,f;if(u>0)for(r=0,n=0;n<o;n++)if(f=t[n].size,r+=f+1,r>=u){t.splice(0,n+1);p("QueueTrim",n+1,_G.IG,!0);break}return JSON.stringify(t)}function et(n){var i,r=(i={log:n,retried:!1},i[s]=!1,i.size=0,i),f=JSON.stringify(r).length+3;r.size=f;t.push(r);ii?u():v()}var t=[],f=!1,e=null,r=[],w=_w.location.pathname,h=k(w);n.dumpToStorage=u;n.initialize=d;n.getBatch=g;n.clearSentItems=tt;n.markFailedItems=it;n.recordRetryAttempt=rt;n.append=et}(u||(u={}));t.enqueue=w;t.collectCommonEventProperties=ct;t.modifyRoute=lt;h=(it={},it[et]={getInterval:function(){return i[d]}},it[k]={getInterval:function(){return i[tr]}},it);t.DirectLog=ai;t.LogPerf=lr;t.LogEvent=tt;t.LogFilterFlare=ar;t.LogCustomData=vr;yr=function(n,t,i,r){for(var f=[],u=4;u<arguments.length;u++)f[u-4]=arguments[u];c(n,t,i,r,f,"L")};t.Log=yr;pr=function(n,t,i,r,u,f,e){var o=Object.keys(e).reduce(function(n,t){return __spreadArray(__spreadArray([],n,!0),[t,e[t]],!1)},[]);i&&o.push("Service",i);r&&o.push("Scenario",r);u&&o.push("AppNS",u);f&&o.push("K",f);c(n,null,t,!1,o,"L2")};t.Log2=pr;c=function(n,t,r,u,f,s){var a,h,l,y,b,p;if(i[o]){if(ri||(ri=!0,c("Init","CI","Base",!1,[],"L")),h={},f&&f.length>0&&f.length%2==0)for(l=0;l<f.length;l+=2)(y=f[l],b=f[l+1],y)&&(h[y]=b);(a=h[e])!==null&&a!==void 0?a:h[e]=v+(s!==null&&s!==void 0?s:"");h.hasOwnProperty("K")||typeof t!="number"||(h.K=t);h.Name=r||"";h.FID=typeof t!="number"?t||"VoidFID":"KFID";p=vt(rt,h,n);p&&w(p)}};t.ForceFlush=br;t.FlushMainQueueDontForce=yt;t.LogPartialImpression=kr;ru();(wt=_w.Log)!==null&&wt!==void 0?wt:_w.Log={};_w.Log=__assign(__assign({},_w.Log),{Log:t.Log,LogFilterFlare:ar,DirectLog:ai,LogCustomData:vr,LogPerf:lr});(bt=_w.Log2)!==null&&bt!==void 0?bt:_w.Log2={};_w.Log2=__assign(__assign({},_w.Log2),{LogEvent:tt,ForceFlush:br,FlushMainQueueDontForce:yt});_G.DLF&&(_w.directLog=ai);_w.sj_log2=t.Log2;_w.cspi_log=kr;_w.LogUtils={Enqueue:w,ModifyRoute:lt,CollectCommonEventProperties:ct};_w[g]&&(_w[g].bind("onP1",yt,!0),_w[g].bind("ajax.postload",yt,!0),_w[g].bind("ajax.unload",or),_w[g].bind("unload",pt));_w[st]&&(_w[st](_w,"beforeunload",pt),_w[st](_w,"pagehide",pt),_w[st](_d,"visibilitychange",function(){_d.visibilityState==="hidden"?pt():ii=!1}))})